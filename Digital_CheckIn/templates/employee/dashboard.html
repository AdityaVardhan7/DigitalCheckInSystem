{% extends "employee/sidebar.html" %} {% block content %}
{% load static %}



            <!-- Sale & Revenue Start -->
            <div class="container-fluid pt-4 px-4">
                <div class="row g-4">
                    <div class="col-sm-6 col-xl-3">
                        <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">
                            <i class="fa fa-users fa-3x text-primary"></i>
                            <div class="ms-3">
                                <p class="mb-2">Employees</p>
                                <h6 class="mb-0">{{total_employees}}</h6>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-xl-3">
                        <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">
                            <i class="fa fa-check-circle fa-3x text-success"></i>
                            <div class="ms-3">
                                <p class="mb-2">Present Today</p>
                                <h6 class="mb-0">{{present}}</h6>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-xl-3">
                        <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">
                            <i class="fa fa-times-circle fa-3x text-danger"></i>
                            <div class="ms-3">
                                <p class="mb-2">Absent Today</p>
                                <h6 class="mb-0">{{absent}}</h6>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-xl-3">
                        <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">
                            <i class="fa fa-user-clock fa-3x text-warning"></i>
                            <div class="ms-3">
                                <p class="mb-2">Not Reported</p>
                                <h6 class="mb-0">{{not_reported}}</h6>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>
            <!-- Sale & Revenue End -->


                


            <!-- Widgets Start -->
            <div class="container-fluid pt-4 px-4">
                <div class="row g-4">
                    <div class="col-sm-12 col-md-6 col-xl-4">
                        <div class="h-100 bg-light rounded p-4">
                            <div class="d-flex align-items-center justify-content-between mb-2">
                                <h6 class="mb-0">Recent Attendance</h6>
                                <a href="/my-attendance/">Show All</a>
                            </div>
                            <div class="d-flex align-items-center border-bottom py-3">
                                <div class="w-100 ms-3">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Date</th>
                                                <th>Status</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for record in recent_attendance %}
                                            <tr>
                                                <td>{{ record.date }}</td>
                                                <td>
                                                    <span class="badge {% if record.status == 'Present' %}bg-success{% else %}bg-danger{% endif %}">
                                                        {{ record.status }}
                                                    </span>
                                                </td>
                                            </tr>
                                            {% empty %}
                                            <tr><td colspan="2" class="text-center">No recent attendance records.</td></tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            
                            
                        </div>
                    </div>
                    
                    <div class="col-sm-12 col-md-6 col-xl-4">
                        <div class="h-100 bg-light rounded p-4">
                            <div class="d-flex align-items-center justify-content-between mb-2">
                                <h6 class="mb-0">Recent Aplogies</h6>
                                <a href="/apology-history/">Show All</a>
                            </div>
                            
                                    {% for apology in recent_apologies %}
                                    <div class="d-flex align-items-center border-bottom py-3">
                                        
                                        <!-- <img class="rounded-circle flex-shrink-0" src="{{ apology.emp.user.profile.profile_image }}" alt="Profile Picture" style="width: 40px; height: 40px;"> -->
                                        <div class="w-100 ms-3">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-0">{{ apology.emp.user.username }}</h6>
                                                <small>{{ apology.time_since }} ago</small>
                                            </div>
                                            <span>{{ apology.reason|truncatechars:50 }}</span>  <!-- Show a short preview of the apology -->
                                        </div>
                                    </div>
                                                                       
                                    {% empty %}
                                    <p class="text-center">You haven't submitted any apologies.</p>
                                    {% endfor %}
                                
                            
                            
                        </div>
                    </div>                    

                    <div class="col-sm-12 col-md-6 col-xl-4">
                        <div class="h-100 bg-light rounded p-4">
                            <div class="d-flex align-items-center justify-content-between mb-4">
                                <h6 class="mb-0">Calender</h6>
                                <a href="">Show All</a>
                            </div>
                            <div id="calender"></div>
                        </div>
                    </div>

                </div>
            </div>
            <!-- Widgets End -->



{% endblock content %}